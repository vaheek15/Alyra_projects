function ordA(a) {
  return a.charCodeAt(0) - 65;
}
 
// vigenere
function vigenere(text, key, decode) {
  var i = 0, b;
  key = key.toUpperCase().replace(/[^A-Z]/g, '');
  return text.toUpperCase().replace(/[^A-Z]/g, '').replace(/[A-Z]/g, function(a) {
    b = key[i++ % key.length];
    return String.fromCharCode(((ordA(a) + (decode ? 26 - ordA(b) : ordA(b))) % 26 + 65));
  });
}
 
// example
//var text = "The moon shows up when the sunset arise in the sky";
//var key = 'cesarplusplus';
//var enc = vigenere(text,key);

var key = "bqxos"

enc = 
"PVADGHFLSHPJNPLUVAGXVVRBRUKCGXEVQINPVBXLVZLRMKFLSXEZQXOGCCHXEICIXUKSCXKEDDKORRXHPHSXGGJRRHPESTJWVBTJWVJFNGJSCLQLBJGUVSATNRJXFKKCBTKJOJXEVJJBQLATNZHSXECUCIBGELTGVGCJOGERPMQLRBHOVLIKGMCAXTCCHXEICIXUKYRVGJQXUNVYIHWJATLVSGTGRFSGJWFGXEARSCITFZAXOVBJLGTPTMEVOJBHRGIITFZAXOVBPGUCCHXEICIVGJRFNKCNTNVVRGXFZTJEILCIKCYGGXXVJTHGUGEXHZLXMRRPSXEYGUYTVPAXPZEBXFLQEAKEVHBXFSHOQLJTSRVPRXTCCHLGTPTMUTCHMNRRPVJVBTECIYXLQECCNPJCCLEVQIECKYRAGUCATRYGAHUFNWBGRSRHPKPPBTVJTFAJRTKGVQIICIBTYKEGIBQEBJGCLRGXQIBGXSLCAXRIMQEGDCXEGJRXGCTATLUZZAXCCYGTKJMCWCEQAXUDWHMGICHWGCYCMKHSXMGJCJEUUCGTTVQXGKKGTLRRPKBGELTGVRJPVQDNGXJVLHBQEBJFAJRTKGVRAXEYPXLVZYCBUDCTLVSCPNEFSEINLQGTFZAPEGEADKGCCBRUKCGXGJRRXSLGTLVRZHHNLKTGVZLPVEVQHBDCCPECIYXLQERWHORQSTSLGCEGGJJLIIYCWVYCDEQXGTGFVRDNVVJPVJICIBGERTFGUGTOCCCTMNRPTYGICCVGVLRHTVYJCQLPSAWZBTMQLRTECKFTHNFEXXEYPTMKVLCXKEQXLVVQJKNVDPBVHSTECIYIBQEYABVVQPKTVRTTWJCJBNUSBRUKCGXNVKNLVVPTXUKQPVTVQXOQLQEKGWCGXBZJTLVKPPGUTCCWCERXEGJRSBXZLPEQIQFNGCCHXEICIXUKNGHHRLTEGJCRKGKCHMKDKPGGERPECTMCWKKGDGJLKPBPVGAXUKFJFCZLTMEVQIIQLPFNQZDXWGCCPLCMMRTVZMCECGPDUNVKPMKJYIBQEJPKGWJTQKFLEAKCMHHRYGFNGZLIXTIMVXNVQTVTVRXGVVPGHIVJWNORLXMGUSHXEICILKTCITKKSCFAJRTKGVJAXPVJXGVVPGHIVPPBVGYHEGDWHMGICCXUKNPLWECRTVVEDKKVNWBNFQDIJZOJX"

//var dec = vigenere(enc,key,true);

var mesg = "NECONFONDONSPASSECRETETMYSTERECESTUNEDISTINCTIONDECISIVELESECRETESTUNEINFORMATIONQUINESTCONNUEQUEDEQUELQUESUNSOUDUNSEULALALIMITEMAISQUECELUIOUCEUXQUILADETIENNENTPEUVENTATOUTMOMENTREVELERLESECRETESTACCESSIBLEATOUSCESTBIENPOURQUOIILYAUNPROBLEMEDUSECRETCEQUIFAITPROBLEMEDANSLESECRETCESTQUILPEUTETREDIVULGUETRAHIREVELEOEDIPEFINITPARDECHIFFRERLENIGMEDUSPHINXSIVOUSVOULEZPERCERLESSECRETSCESTLATACHEDELARAISONENUNSENSCESTLATACHEDELAPHILOSOPHIEAUCONTRAIRELEMYSTEREESTPARDEFINITIONDUNAUTREORDREQUELEPROBLEMEILESTINACCESSIBLEALARAISONDANSLESMYSTERESDELANTIQUITESEULSDERARESINITIESPARVIENNENTALACOMPREHENSIONDUMYSTEREETLECHRISTIANISMEESTBEAUCOUPPLUSRADICALENCORELEMYSTEREESTCEQUIESTABSOLUMENTINACCESSIBLEALARAISONTHOMASDAQUINLEPLUSGRANDTHEOLOGIENDETOUTELACHRETIENTEMEDIEVALEETLAREFERENCEENCOREAUJOURDHUIDETOUTELATHEOLOGIECHRETIENNEINSISTESURLEFAITQUELARATIONALITESARRETEAUSEUILDUMYSTERELEMYSTEREESTSACRESIVOUSPREFEREZILESTTRANSCENDANTILESTDIVINALORSQUELESECRETESTPROFANELESECRETESTIMMANENTALACONDITIONHUMAINEILESTHUMAINETCESTPOURQUOIFIDELEASAVOCATIONLAPROBLEMATISATIONLAREFLEXIONPHILOSOPHIQUEINTERROGELESECRETINTERROGELHUMANITEDUSECRETSICETAITUNMYSTEREELLENELINTERROGERAITPASLEMYSTERENESTPASUNECATEGORIEPHILOSOPHIQUE"


var ciph = vigenere(mesg,key)
console.log(ciph)

console.log(ciph === enc)


